---
title: Homework 10
header-includes:
    - \usepackage{fancyhdr}
    - \pagestyle{fancy}
    - \fancyhead[CO,CE]{ECE 387}
    - \fancyfoot[CO,CE]{\thepage}
    - \fancyfoot[LE,RO]{Robots are cool!}
---

**Integrity:** Your honor is extremely important.  This academic security policy is designed to help you succeed in meeting academic requirements while practicing the honorable behavior our country rightfully demands of its military.  Do not compromise your integrity by violating academic security or by taking unfair advantage of your classmates.

**Authorized Resources:** You can **ONLY** seek help from the instructor. Homework
is an individual exercise.

# Telemetry Recording

Typically ...

```python
class Bag(object):
	def __init__(self, filename, topics)        # constructor
	def __del__(self)                           # destructor, saves data on exit
	def push(self, key, data, stringify=False)  # pushes data for saving, stringify takes
												# a binary image and converts it to Base64
	def close(self)                             # saves and closes the bagit data
	def read(self)                              # reads a bagit data file
	def size(self)                              # returns size in kb
```

## Task 1

Now, using the above class, create a program that will capture roomba's light bumper
sensors, so you can plot them later.

```python
from __future__ import print_function
from bagit import Bagit
from pycreate2 import Create2


if __name__ == "__main__":
	bag = Bagit('data.json', 'ir')

	bot = Create2('/dev/ttyUSB0')
	bot.start()
	bot.safe()

	for i in range(100):
		s = bot.get_sensors()
		bag.push('ir', s)
		sleep(0.1)  # ~100 Hz
```

Using the code above, capture data from the roomba.

## Task 2

Now, do a similar thing, but capture images from the camera.

```pythonfrom __future__ import print_function
from bagit import Bagit
from pycreate2 import Create2
from opencvutils import Camera


if __name__ == "__main__":
	bag = Bagit('data-images.json', 'images')

	camera = Camera(cam='cv')

	for i in range(150):
		ret, img = camera.read()
		if ret:
			bag.push('images', s, True)
		else:
			print('Error capturing image')
		sleep(0.033)  # ~30 Hz
```
